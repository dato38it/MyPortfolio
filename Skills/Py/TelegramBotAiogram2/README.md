# Telegram Bot
<p><strong>Task:</strong><br>Message Handler<br><strong>Decision:</strong><br>$ pip install aiogram==2.23.1<br>$ pip install python-dotenv==1.0.1<br>$ vim py.py<br>$ cat py.py<br>from aiogram import Bot, Dispatcher, executor, types<br>API_TOKEN = 'ttoken2'<br>bot = Bot(token=API_TOKEN)<br>dp = Dispatcher(bot)<br>@dp.message_handler(commands=['start'])<br>async def cmd_start(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'{message.from_user.first_name}, Добро пожаловать в магазин кросовок!')<br>@dp.message_handler()<br>async def answer(message: types.Message):<br>&nbsp;&nbsp;await message.reply('Я тебя не понимаю.')<br>if __name__ == '__main__':<br>&nbsp;&nbsp;executor.start_polling(dp)<br>$ python py.py<br>/start<br><strong>Task:</strong><br>Скрыть токен бота<br><strong>Decision:</strong><br>$ vim .env<br>$ cat .env<br>TOKEN='ttoken2'<br>$ vim py.py<br>$ cat py.py<br>from aiogram import Bot, Dispatcher, executor, types<br>from dotenv import load_dotenv<br>import os<br>load_dotenv()<br>bot = Bot(os.getenv('TOKEN'))<br>dp = Dispatcher(bot)<br>...<br><strong>Task:</strong><br>Обратная связь и обработка файлов, стикеров и фото<br><strong>Decision:</strong><br>$ vim py.py<br>$ cat py.py<br>...<br>@dp.message_handler(commands=['start'])<br>async def cmd_start(message: types.Message):<br>&nbsp;&nbsp;await message.answer_sticker('ttoken1')<br>&nbsp;&nbsp;await message.answer(f'{message.from_user.first_name}, Добро пожаловать в магазин кросовок!')<br>@dp.message_handler(content_types=['sticker'])<br>async def check_sticker(message: types.Message):<br>&nbsp;&nbsp;await message.answer(message.sticker.file_id)<br>&nbsp;&nbsp;await bot.send_message(message.from_user.id, message.chat.id)<br>@dp.message_handler(content_types=['document', 'photo'])<br>async def forward_message(message: types.Message):<br>&nbsp;&nbsp;await bot.forward_message(os.getenv('GROUP_ID'), message.from_user.id, message.message_id)<br>@dp.message_handler()<br>...<br>$ vim .env<br>$ cat .env<br>TOKEN=ttoken2<br>GROUP_ID=-ttoken3<br>$ python py.py<br>/start<br><strong>Task:</strong><br>Клавиатура ReplyMarkup и админка<br><strong>Decision:</strong><br>$ vim py.py<br>$ cat py.py<br>from aiogram.types import ReplyKeyboardMarkup<br>load_dotenv()<br>bot = Bot(os.getenv('TOKEN'))<br>dp = Dispatcher(bot)<br>main = ReplyKeyboardMarkup(resize_keyboard=True)<br>main.add('Каталог').add('Корзина').add('Контакты')<br>main_admin = ReplyKeyboardMarkup(resize_keyboard=True)<br>main_admin.add('Каталог').add('Корзина').add('Контакты').add('Админ-панель')<br>admin_panel = ReplyKeyboardMarkup(resize_keyboard=True)<br>admin_panel.add('Добавить товар').add('Удалить товар').add('Сделать рассылку')<br>@dp.message_handler(commands=['start'])<br>async def cmd_start(message: types.Message):<br>&nbsp;&nbsp;await message.answer_sticker('ttoken1')<br>&nbsp;&nbsp;await message.answer(f'{message.from_user.first_name}, Добро пожаловать в магазин кросовок!', reply_markup=main)<br>&nbsp;&nbsp;if message.from_user.id == int(os.getenv('ADMIN_ID')):<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.answer(f'Вы авторизовались как администратор!', reply_markup=main_admin)<br>#@dp.message_handler(content_types=['sticker'])<br>#async def check_sticker(message: types.Message):<br>#&nbsp;&nbsp;await message.answer(message.sticker.file_id)<br>#&nbsp;&nbsp;await bot.send_message(message.from_user.id, message.chat.id)<br>#@dp.message_handler(content_types=['document', 'photo'])<br>#async def forward_message(message: types.Message):<br>#&nbsp;&nbsp;await bot.forward_message(os.getenv('GROUP_ID'), message.from_user.id, message.message_id)<br>@dp.message_handler(commands=['id'])<br>async def cmd_id(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'{message.from_user.id}')<br>@dp.message_handler(text='Каталог')<br>async def catalog(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Каталог пуст!')<br>@dp.message_handler(text='Корзина')<br>async def cart(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Корзина пуста!')<br>@dp.message_handler(text='Контакты')<br>async def contacts(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Покупать товар у него: @mesudoteach')<br>@dp.message_handler(text='Админ-панель')<br>async def contacts(message: types.Message):<br>&nbsp;&nbsp;if message.from_user.id == int(os.getenv('ADMIN_ID')):<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.answer(f'Вы вошли в админ-панель', reply_markup=admin_panel)<br>&nbsp;&nbsp;else:<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.reply('Я тебя не понимаю.')<br>@dp.message_handler()<br>$ vim .env<br>$ cat .env<br>TOKEN=ttoken2<br>GROUP_ID=-ttoken3<br>ADMIN_ID=ttoken4<br>$ python py.py<br>/id<br><strong>Task:</strong><br>Клавиатура InlineKeyboard<br><strong>Decision:</strong><br>$ vim py.py<br>$ cat py.py<br>...<br>from aiogram.types import ReplyKeyboardMarkup, InlineKeyboardMarkup, InlineKeyboardButton<br>...<br>admin_panel.add('Добавить товар').add('Удалить товар').add('Сделать рассылку')<br>catalog_list = InlineKeyboardMarkup(row_width=2)<br>catalog_list.add(InlineKeyboardButton(text='Футболки', url='https://youtube.com/@sudoteach'),<br>&nbsp;&nbsp;InlineKeyboardButton(text='Шорты', url='https://youtube.com/@sudoteach'),<br>&nbsp;&nbsp;InlineKeyboardButton(text='Кроссовки', url='https://youtube.com/@sudoteach'))<br>...<br>@dp.message_handler(text='Каталог')<br>async def catalog(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Каталог пуст!', reply_markup=catalog_list)<br>...<br>$ python py.py<br>/start<br><strong>Task:</strong><br>SQLite, Aiogram, подключение БД и создание таблиц<br><strong>Decision:</strong><br>$ mkdir app<br>$ touch app/__init__.py<br>$ touch app/database.py<br>$ touch app/keyboards.py<br>$ vim app/keyboards.py<br>$ cat app/keyboards.py<br>from aiogram.types import ReplyKeyboardMarkup, InlineKeyboardMarkup, InlineKeyboardButton<br>main = ReplyKeyboardMarkup(resize_keyboard=True)<br>main.add('Каталог').add('Корзина').add('Контакты')<br>main_admin = ReplyKeyboardMarkup(resize_keyboard=True)<br>main_admin.add('Каталог').add('Корзина').add('Контакты').add('Админ-панель')<br>admin_panel = ReplyKeyboardMarkup(resize_keyboard=True)<br>admin_panel.add('Добавить товар').add('Удалить товар').add('Сделать рассылку')<br>catalog_list = InlineKeyboardMarkup(row_width=2)<br>catalog_list.add(InlineKeyboardButton(text='Футболки', url='https://youtube.com/@sudoteach'),<br>&nbsp;&nbsp;InlineKeyboardButton(text='Шорты', url='https://youtube.com/@sudoteach'),<br>&nbsp;&nbsp;InlineKeyboardButton(text='Кроссовки', url='https://youtube.com/@sudoteach'))<br>$ vim py.py<br>$ cat py.py<br>from aiogram import Bot, Dispatcher, executor, types<br>from dotenv import load_dotenv<br>import os<br>#from aiogram.types import ReplyKeyboardMarkup, InlineKeyboardMarkup, InlineKeyboardButton<br>from app import keyboards as kb<br>from app import database as db<br>load_dotenv()<br>bot = Bot(os.getenv('TOKEN'))<br>dp = Dispatcher(bot)<br>#main = ReplyKeyboardMarkup(resize_keyboard=True)<br>#main.add('Каталог').add('Корзина').add('Контакты')<br>#main_admin = ReplyKeyboardMarkup(resize_keyboard=True)<br>#main_admin.add('Каталог').add('Корзина').add('Контакты').add('Админ-панель')<br>#admin_panel = ReplyKeyboardMarkup(resize_keyboard=True)<br>#admin_panel.add('Добавить товар').add('Удалить товар').add('Сделать рассылку')<br>#catalog_list = InlineKeyboardMarkup(row_width=2)<br>#catalog_list.add(InlineKeyboardButton(text='Футболки', url='https://youtube.com/@sudoteach'),<br>#&nbsp;&nbsp;InlineKeyboardButton(text='Шорты', url='https://youtube.com/@sudoteach'),<br>#&nbsp;&nbsp;InlineKeyboardButton(text='Кроссовки', url='https://youtube.com/@sudoteach'))<br>async def on_startup(_):<br>&nbsp;&nbsp;await db.db_start()<br>&nbsp;&nbsp;print('Бот успешно запущен!')<br>@dp.message_handler(commands=['start'])<br>async def cmd_start(message: types.Message):<br>&nbsp;&nbsp;await message.answer_sticker('ttoken1')<br>&nbsp;&nbsp;await message.answer(f'{message.from_user.first_name}, Добро пожаловать в магазин кросовок!', reply_markup=kb.main)<br>&nbsp;&nbsp;if message.from_user.id == int(os.getenv('ADMIN_ID')):<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.answer(f'Вы авторизовались как администратор!', reply_markup=kb.main_admin)<br>#@dp.message_handler(content_types=['sticker'])<br>#async def check_sticker(message: types.Message):<br>#&nbsp;&nbsp;await message.answer(message.sticker.file_id)<br>#&nbsp;&nbsp;await bot.send_message(message.from_user.id, message.chat.id)<br>#@dp.message_handler(content_types=['document', 'photo'])<br>#async def forward_message(message: types.Message):<br>#&nbsp;&nbsp;await bot.forward_message(os.getenv('GROUP_ID'), message.from_user.id, message.message_id)<br>@dp.message_handler(commands=['id'])<br>async def cmd_id(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'{message.from_user.id}')<br>@dp.message_handler(text='Каталог')<br>async def catalog(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Каталог пуст!', reply_markup=kb.catalog_list)<br>@dp.message_handler(text='Корзина')<br>async def cart(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Корзина пуста!')<br>@dp.message_handler(text='Контакты')<br>async def contacts(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Покупать товар у него: @mesudoteach')<br>@dp.message_handler(text='Админ-панель')<br>async def contacts(message: types.Message):<br>&nbsp;&nbsp;if message.from_user.id == int(os.getenv('ADMIN_ID')):<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.answer(f'Вы вошли в админ-панель', reply_markup=kb.admin_panel)<br>&nbsp;&nbsp;else:<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.reply('Я тебя не понимаю.')<br>@dp.message_handler()<br>async def answer(message: types.Message):<br>&nbsp;&nbsp;await message.reply('Я тебя не понимаю.')<br>if __name__ == '__main__':<br>&nbsp;&nbsp;executor.start_polling(dp, on_startup=on_startup)<br>$ vim app/database.py<br>$ cat app/database.py<br>import sqlite3 as sq<br>db = sq.connect('tg.db')<br>cur = db.cursor()<br>async def db_start():<br>&nbsp;&nbsp;cur.execute("CREATE TABLE IF NOT EXISTS accounts("<br>&nbsp;&nbsp;&nbsp;&nbsp;"id INTEGER PRIMARY KEY AUTOINCREMENT, "<br>&nbsp;&nbsp;&nbsp;&nbsp;"cart_id TEXT)")<br>&nbsp;&nbsp;cur.execute("CREATE TABLE IF NOT EXISTS items("<br>&nbsp;&nbsp;&nbsp;&nbsp;"i_id INTEGER PRIMARY KEY AUTOINCREMENT, "<br>&nbsp;&nbsp;&nbsp;&nbsp;"name TEXT,"<br>&nbsp;&nbsp;&nbsp;&nbsp;"desc TEXT, "<br>&nbsp;&nbsp;&nbsp;&nbsp;"price TEXT, "<br>&nbsp;&nbsp;&nbsp;&nbsp;"photo TEXT, "<br>&nbsp;&nbsp;&nbsp;&nbsp;"brand TEXT)")<br>&nbsp;&nbsp;db.commit()<br>$ python py.py<br>$ sqlite3 tg.db<br>sqlite&gt; .tables<br>accounts  items<br>sqlite&gt; .exit<br><strong>Task:</strong><br>Callback Query Data, Работа с SQLite<br><strong>Decision:</strong><br>$ vim app/keyboards.py<br>$ cat app/keyboards.py<br>...<br>catalog_list.add(InlineKeyboardButton(text='Футболки', callback_data='t-shirt'),<br>&nbsp;&nbsp;InlineKeyboardButton(text='Шорты', callback_data='shorts'),<br>&nbsp;&nbsp;InlineKeyboardButton(text='Кроссовки', callback_data='sneakers'))<br>$ vim py.py<br>$ cat py.py<br>...<br>@dp.message_handler(commands=['start'])<br>async def cmd_start(message: types.Message):<br>&nbsp;&nbsp;await db.cmd_start_db(message.from_user.id)<br>...<br>@dp.callback_query_handler()<br>async def callback_query_keyboard(callback_query: types.CallbackQuery):<br>&nbsp;&nbsp;if callback_query.data == 't-shirt':<br>&nbsp;&nbsp;&nbsp;&nbsp;await bot.send_message(chat_id=callback_query.from_user.id, text='Вы выбрали футболки')<br>&nbsp;&nbsp;elif callback_query.data == 'shorts':<br>&nbsp;&nbsp;&nbsp;&nbsp;await bot.send_message(chat_id=callback_query.from_user.id, text='Вы выбрали шорты')<br>&nbsp;&nbsp;elif callback_query.data == 'sneakers':<br>&nbsp;&nbsp;&nbsp;&nbsp;await bot.send_message(chat_id=callback_query.from_user.id, text='Вы выбрали кроссовки')<br>if __name__ == '__main__':<br>&nbsp;&nbsp;executor.start_polling(dp, on_startup=on_startup, skip_updates=True)<br>$ vim app/database.py<br>$ cat app/database.py<br>...<br>&nbsp;&nbsp;cur.execute("CREATE TABLE IF NOT EXISTS accounts("<br>&nbsp;&nbsp;&nbsp;&nbsp;"id INTEGER PRIMARY KEY AUTOINCREMENT, "<br>&nbsp;&nbsp;&nbsp;&nbsp;"tg_id INTEGER, "<br>&nbsp;&nbsp;&nbsp;&nbsp;"cart_id TEXT)")<br>...<br>async def cmd_start_db(user_id):<br>&nbsp;&nbsp;user = cur.execute("SELECT * FROM accounts WHERE tg_id == {key}".format(key=user_id)).fetchone()<br>&nbsp;&nbsp;if not user:<br>&nbsp;&nbsp;&nbsp;&nbsp;cur.execute("INSERT INTO accounts (tg_id) VALUES ({key})".format(key=user_id))<br>&nbsp;&nbsp;&nbsp;&nbsp;db.commit()<br>$ rm -rf tg.db<br>$ python py.py<br>$ sqlite3 tg.db<br>sqlite&gt; .tables<br>accounts  items   <br>sqlite&gt; select * from accounts;<br>1|ttoken4|<br><strong>Task:</strong><br>Fsm конечные автоматы и добавление товара в БД<br><strong>Decision:</strong><br>$ vim py.py<br>$ cat py.py<br>from aiogram import Bot, Dispatcher, executor, types<br>from dotenv import load_dotenv<br>import os<br>#from aiogram.types import ReplyKeyboardMarkup, InlineKeyboardMarkup, InlineKeyboardButton<br>from app import keyboards as kb<br>from app import database as db<br>from aiogram.contrib.fsm_storage.memory import MemoryStorage<br>from aiogram.dispatcher.filters.state import State, StatesGroup<br>from aiogram.dispatcher import FSMContext<br>storage = MemoryStorage()<br>load_dotenv()<br>bot = Bot(os.getenv('TOKEN'))<br>dp = Dispatcher(bot=bot, storage=storage)<br>#main = ReplyKeyboardMarkup(resize_keyboard=True)<br>#main.add('Каталог').add('Корзина').add('Контакты')<br>#main_admin = ReplyKeyboardMarkup(resize_keyboard=True)<br>#main_admin.add('Каталог').add('Корзина').add('Контакты').add('Админ-панель')<br>#admin_panel = ReplyKeyboardMarkup(resize_keyboard=True)<br>#admin_panel.add('Добавить товар').add('Удалить товар').add('Сделать рассылку')<br>#catalog_list = InlineKeyboardMarkup(row_width=2)<br>#catalog_list.add(InlineKeyboardButton(text='Футболки', url='https://youtube.com/@sudoteach'),<br>#&nbsp;&nbsp;InlineKeyboardButton(text='Шорты', url='https://youtube.com/@sudoteach'),<br>#&nbsp;&nbsp;InlineKeyboardButton(text='Кроссовки', url='https://youtube.com/@sudoteach'))<br>async def on_startup(_):<br>&nbsp;&nbsp;await db.db_start()<br>&nbsp;&nbsp;print('Бот успешно запущен!')<br>class NewOrder(StatesGroup):<br>&nbsp;&nbsp;type = State()<br>&nbsp;&nbsp;name = State()<br>&nbsp;&nbsp;desc = State()<br>&nbsp;&nbsp;price = State()<br>&nbsp;&nbsp;photo = State()<br>@dp.message_handler(commands=['start'])<br>async def cmd_start(message: types.Message):<br>&nbsp;&nbsp;await db.cmd_start_db(message.from_user.id)<br>&nbsp;&nbsp;await message.answer_sticker('ttoken1')<br>&nbsp;&nbsp;await message.answer(f'{message.from_user.first_name}, Добро пожаловать в магазин кросовок!', reply_markup=kb.main)<br>&nbsp;&nbsp;if message.from_user.id == int(os.getenv('ADMIN_ID')):<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.answer(f'Вы авторизовались как администратор!', reply_markup=kb.main_admin)<br>#@dp.message_handler(content_types=['sticker'])<br>#async def check_sticker(message: types.Message):<br>#&nbsp;&nbsp;await message.answer(message.sticker.file_id)<br>#&nbsp;&nbsp;await bot.send_message(message.from_user.id, message.chat.id)<br>#@dp.message_handler(content_types=['document', 'photo'])<br>#async def forward_message(message: types.Message):<br>#&nbsp;&nbsp;await bot.forward_message(os.getenv('GROUP_ID'), message.from_user.id, message.message_id)<br>@dp.message_handler(commands=['id'])<br>async def cmd_id(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'{message.from_user.id}')<br>@dp.message_handler(text='Каталог')<br>async def catalog(message: types.Message):<br>&nbsp;&nbsp;await message.answer('Выберите категорию', reply_markup=kb.catalog_list)<br>@dp.message_handler(text='Корзина')<br>async def cart(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Корзина пуста!')<br>@dp.message_handler(text='Контакты')<br>async def contacts(message: types.Message):<br>&nbsp;&nbsp;await message.answer(f'Покупать товар у него: @mesudoteach')<br>@dp.message_handler(text='Админ-панель')<br>async def contacts(message: types.Message):<br>&nbsp;&nbsp;if message.from_user.id == int(os.getenv('ADMIN_ID')):<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.answer(f'Вы вошли в админ-панель', reply_markup=kb.admin_panel)<br>&nbsp;&nbsp;else:<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.reply('Я тебя не понимаю.')<br>@dp.message_handler(text='Добавить товар')<br>async def add_item(message: types.Message):<br>&nbsp;&nbsp;if message.from_user.id == int(os.getenv('ADMIN_ID')):<br>&nbsp;&nbsp;&nbsp;&nbsp;await NewOrder.type.set()<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.answer('Выберите тип товара', reply_markup=kb.catalog_list)<br>&nbsp;&nbsp;else:<br>&nbsp;&nbsp;&nbsp;&nbsp;await message.reply('Я тебя не понимаю.')<br>@dp.callback_query_handler(state=NewOrder.type)<br>async def add_item_type(call: types.CallbackQuery, state: FSMContext):<br>&nbsp;&nbsp;async with state.proxy() as data:<br>&nbsp;&nbsp;&nbsp;&nbsp;data['type'] = call.data<br>&nbsp;&nbsp;await call.message.answer('Напишите название товара', reply_markup=kb.cancel)<br>&nbsp;&nbsp;await NewOrder.next()<br>@dp.message_handler(state=NewOrder.name)<br>async def add_item_name(message: types.Message, state: FSMContext):<br>&nbsp;&nbsp;async with state.proxy() as data:<br>&nbsp;&nbsp;&nbsp;&nbsp;data['name'] = message.text<br>&nbsp;&nbsp;await message.answer('Напишите описание товара')<br>&nbsp;&nbsp;await NewOrder.next()<br>@dp.message_handler(state=NewOrder.desc)<br>async def add_item_desc(message: types.Message, state: FSMContext):<br>&nbsp;&nbsp;async with state.proxy() as data:<br>&nbsp;&nbsp;&nbsp;&nbsp;data['desc'] = message.text<br>&nbsp;&nbsp;await message.answer('Напишите цену товара')<br>&nbsp;&nbsp;await NewOrder.next()<br>@dp.message_handler(state=NewOrder.price)<br>async def add_item_desc(message: types.Message, state: FSMContext):<br>&nbsp;&nbsp;async with state.proxy() as data:<br>&nbsp;&nbsp;&nbsp;&nbsp;data['price'] = message.text<br>&nbsp;&nbsp;await message.answer('Отправьте фотографию товара')<br>&nbsp;&nbsp;await NewOrder.next()<br>@dp.message_handler(lambda message: not message.photo, state=NewOrder.photo)<br>async def add_item_photo_check(message: types.Message):<br>&nbsp;&nbsp;await message.answer('Это не фотография!')<br>@dp.message_handler(content_types=['photo'], state=NewOrder.photo)<br>async def add_item_photo(message: types.Message, state: FSMContext):<br>&nbsp;&nbsp;async with state.proxy() as data:<br>&nbsp;&nbsp;&nbsp;&nbsp;data['photo'] = message.photo[0].file_id<br>&nbsp;&nbsp;await db.add_item(state)<br>&nbsp;&nbsp;await message.answer('Товар успешно создан!', reply_markup=kb.admin_panel)<br>&nbsp;&nbsp;await state.finish()<br>@dp.message_handler()<br>async def answer(message: types.Message):<br>&nbsp;&nbsp;await message.reply('Я тебя не понимаю.')<br>@dp.callback_query_handler()<br>async def callback_query_keyboard(callback_query: types.CallbackQuery):<br>&nbsp;&nbsp;if callback_query.data == 't-shirt':<br>&nbsp;&nbsp;&nbsp;&nbsp;await bot.send_message(chat_id=callback_query.from_user.id, text='Вы выбрали футболки')<br>&nbsp;&nbsp;elif callback_query.data == 'shorts':<br>&nbsp;&nbsp;&nbsp;&nbsp;await bot.send_message(chat_id=callback_query.from_user.id, text='Вы выбрали шорты')<br>&nbsp;&nbsp;elif callback_query.data == 'sneakers':<br>&nbsp;&nbsp;&nbsp;&nbsp;await bot.send_message(chat_id=callback_query.from_user.id, text='Вы выбрали кроссовки')<br>if __name__ == '__main__':<br>&nbsp;&nbsp;executor.start_polling(dp, on_startup=on_startup, skip_updates=True)<br>$ vim app/keyboards.py<br>$ cat app/keyboards.py<br>...<br>cancel = ReplyKeyboardMarkup(resize_keyboard=True)<br>cancel.add('Отмена')<br>$ vim app/database.py<br>$ cat app/database.py<br>...<br>async def add_item(state):<br>&nbsp;&nbsp;async with state.proxy() as data:<br>&nbsp;&nbsp;&nbsp;&nbsp;cur.execute("INSERT INTO items (name, desc, price, photo, brand) VALUES (?, ?, ?, ?, ?)",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(data['name'], data['desc'], data['price'], data['photo'], data['type']))<br>&nbsp;&nbsp;&nbsp;&nbsp;db.commit()<br>$ python py.py<br>$ sqlite3 tg.db<br>sqlite&gt; select * from items;<br>1|Белая футболка|Цвет белый|100|AgACAgIAAxkBAAOjZkG2hBeRa61pfdvr7IacKULlWYgAAhvZMRtVOhBKB6jZfQAB3KJXAQADAgADcwADNQQ|t-shirt<br>2|Синие шорты|Синий цвет|240|AgACAgIAAxkBAAO3ZkG26NtLfBJHqOEkabkQ9VFiwjIAAh7ZMRtVOhBKS52I_eScPy4BAAMCAANzAAM1BA|shorts<br>3|Отмена|Отмена|Отмена|AgACAgIAAxkBAAPGZkG3EHZzFGU4xnGNHhuj63bCntEAAhvZMRtVOhBKB6jZfQAB3KJXAQADAgADcwADNQQ|t-shirt<br><strong>Source:</strong><br>AIOGRAM 2 - ПОЛНЫЙ КУРС - https://www.youtube.com/playlist?list=PLV0FNhq3XMOK89Uu3yIEihN1KQ_LfXtjB<br></p>